<?xml version='1.0' encoding='UTF-8'?>
<testcase testfamily="gui" testgroup="subagent" testcase="end2end_delete_subagent" parallel="false" workflowpause="0" location="1-qav.tb1.rcdnlab1.com">
  <!-- 1. login to t5a as auto_var1 (agent)
	 2. go to approved agents page
	 3. click on auto_var1_subagent1 (subagent)
	 4. click on delete
	 5. Click on OK
	 6. verify that the subagent is deleted
	 7. try to login with subagnet, make sure that invalud username message show up-->
	 <workflow driver="xmlapi" wfid="register_agent" stoptype="abort">
	 <action acid="1" stoptype="abort" timeout="30">
        <actionname>proxy</actionname>
        <actionparam paramtype="argument" paramvalue="1-qav.tb1.rcdnlab1.com"/>
    </action>
    <action acid="2" stoptype="abort" timeout="30">
        <actionname>source</actionname>
        <actionparam paramtype="argument" paramvalue="/tmp/proxy.env"/>
    </action>
	</workflow>
  <workflow driver="selenium" wfid="delete_subagent" stoptype="abort" profile="webdriver">
    <action acid="0" stoptype="abort">
      <actionname>config</actionname>
      <actionparam paramtype="path" paramvalue="./data/selenium_config/page_log_in.xml"/>
    </action>
    <action acid="1" stoptype="abort">
      <actionname>login</actionname>
      <actionparam paramtype="url" paramvalue="https://www.tb1.rcdnlab1.com"/>
      <actionparam paramtype="username" paramvalue="auto_var1"/>
      <actionparam paramtype="password" paramvalue="Test1234"/>
    </action>
    <action acid="2" stoptype="abort">
      <actionname>verify</actionname>
      <actionparam paramtype="type" paramvalue="page"/>
      <actionparam paramtype="value" paramvalue="Overview"/>
    </action>
    <action acid="3" stoptype="abort">
      <actionname>hover</actionname>
      <actionparam paramtype="type" paramvalue="menu"/>
      <actionparam paramtype="value" paramvalue="Agents"/>
    </action>
    <action acid="4" stoptype="abort">
      <actionname>click</actionname>
      <actionparam paramtype="type" paramvalue="submenu"/>
      <actionparam paramtype="value" paramvalue="Approved Agents"/>
    </action>
    <action acid="5" stoptype="abort">
      <actionname>verify</actionname>
      <actionparam paramtype="type" paramvalue="page"/>
      <actionparam paramtype="value" paramvalue="Approved Agents"/>
    </action>
    <action acid="6" stoptype="abort">
      <actionname>wait</actionname>
      <actionparam paramtype="type" paramvalue="seconds"/>
      <actionparam paramtype="value" paramvalue="1"/>
    </action>
    <action acid="7" stoptype="abort">
      <actionname>config</actionname>
      <actionparam paramtype="path" paramvalue="./data/selenium_config/page_approved_agents.xml"/>
    </action>
    <action acid="8" stoptype="continue">
      <actionname>verify</actionname>
      <actionparam paramtype="type" paramvalue="row"/>
      <actionparam paramtype="value" paramvalue="auto_var1_subagent1"/>
    </action>
    <action acid="9" stoptype="abort">
      <actionname>click</actionname>
      <actionparam paramtype="type" paramvalue="row"/>
      <actionparam paramtype="value" paramvalue="auto_var1_subagent1"/>
    </action>
    <action acid="10" stoptype="abort">
      <actionname>click</actionname>
      <actionparam paramtype="type" paramvalue="button"/>
      <actionparam paramtype="value" paramvalue="Delete"/>
    </action>
    <action acid="11" stoptype="abort">
      <actionname>click</actionname>
      <actionparam paramtype="type" paramvalue="button"/>
      <actionparam paramtype="value" paramvalue="OK"/>
    </action>
    <action acid="12" stoptype="abort">
      <actionname>verify</actionname>
      <actionparam paramtype="type" paramvalue="page"/>
      <actionparam paramtype="value" paramvalue="Approved Agents"/>
    </action>
    <action acid="13" stoptype="continue">
      <actionname>verify</actionname>
      <actionparam paramtype="type" paramvalue="row"/>
      <actionparam paramtype="novalue" paramvalue="auto_var1_subagent1"/>
    </action>
    <action acid="14" stoptype="abort">
      <actionname>click</actionname>
      <actionparam paramtype="type" paramvalue="link"/>
      <actionparam paramtype="value" paramvalue="Log Out"/>
    </action>
    <action acid="15" stoptype="abort">
      <actionname>verify</actionname>
      <actionparam paramtype="type" paramvalue="page"/>
      <actionparam paramtype="value" paramvalue="Login"/>
    </action>
    <action acid="16" stoptype="abort">
      <actionname>config</actionname>
      <actionparam paramtype="path" paramvalue="./data/selenium_config/page_log_in.xml"/>
    </action>
    <action acid="17" stoptype="abort">
      <actionname>input</actionname>
      <actionparam paramtype="type" paramvalue="text field"/>
      <actionparam paramtype="label" paramvalue="Username"/>
      <actionparam paramtype="value" paramvalue="auto_var1_subagent1"/>
    </action>
    <action acid="18" stoptype="abort">
      <actionname>input</actionname>
      <actionparam paramtype="type" paramvalue="text field"/>
      <actionparam paramtype="label" paramvalue="Password"/>
      <actionparam paramtype="value" paramvalue="Test1234"/>
    </action>
    <action acid="19" stoptype="abort">
      <actionname>click</actionname>
      <actionparam paramtype="type" paramvalue="button"/>
      <actionparam paramtype="value" paramvalue="Log In"/>
    </action>
    <!--wait for 10 seconds for the invalid username and/or password message to show up-->
    <action acid="20" stoptype="continue">
      <actionname>waitfor</actionname>
      <actionparam paramtype="type" paramvalue="text"/>
      <actionparam paramtype="label" paramvalue="error message"/>
      <actionparam paramtype="value" paramvalue="Invalid username and/or password"/>
      <actionparam paramtype="time" paramvalue="10"/>
    </action>
    <action acid="21" stoptype="continue">
      <actionname>verify</actionname>
      <actionparam paramtype="type" paramvalue="error message"/>
      <actionparam paramtype="value" paramvalue="Invalid username and/or password Please try again"/>
    </action>
    <action acid="22" stoptype="abort">
      <actionname>submitTCResult</actionname>
      <actionparam paramtype="Boolean" paramvalue="Boolean"/>
    </action>
  </workflow>
</testcase>

    
