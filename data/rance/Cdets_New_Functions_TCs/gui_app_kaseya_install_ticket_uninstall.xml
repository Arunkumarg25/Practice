<?xml version='1.0' encoding='UTF-8'?>
<testcase testfamily="gui_shinner" testgroup="agent" testcase="install_ticket_uninstall" parallel="false" workflowpause="0" location="1-qa.tb1.rcdnlab1.com" customerid="${customerid}">
  <!-- 
	 1. Login to t5a as a agent
	 2. Go to the customer
	 3. Install the kaseya app
	 4. Verify the installation is successed
	 5. Enter the organization id and verify the credential id
	 6. Create a delivery rule
	 -->
  <workflow driver="selenium" wfid="agent_create_contact" stoptype="abort" profile="webdriver" browser="firefox">
    <!--login as agent-->
    <action acid="0" stoptype="abort">
      <actionname>login</actionname>
      <actionparam paramtype="url" paramvalue="https://1-qa.tb1.rcdnlab1.com"/>
      <actionparam paramtype="username" paramvalue="rantao59@yahoo.com"/>
      <actionparam paramtype="password" paramvalue="qazWSX123"/>
    </action>
    <!--Go to the customer--> 
	<action acid="2" stoptype="abort" timeout="30">
      <actionname>wait</actionname> 
      <actionparam paramtype="type" paramvalue="seconds" /> 
      <actionparam paramtype="value" paramvalue="2" /> 
      </action>	
    <action acid="3" stoptype="abort">
      <actionname>click</actionname>
      <actionparam paramtype="type" paramvalue="row"/>
	  <actionparam paramtype="xpath" paramvalue="/html/body/div/div[2]/div/div[2]/table/tbody/tr"/>
      <actionparam paramtype="value" paramvalue="Ran's Kaseya Test"/>
    </action>
	<action acid="4" stoptype="abort" timeout="30">
      <actionname>wait</actionname> 
      <actionparam paramtype="type" paramvalue="seconds" /> 
      <actionparam paramtype="value" paramvalue="5" /> 
      </action>
	 <!--Go to the app page-->
	<action acid="5" stoptype="abort">
      <actionname>click</actionname>
      <actionparam paramtype="type" paramvalue="link"/>
      <actionparam paramtype="xpath" paramvalue="/html/body/div/div[2]/ul/li[5]/a/cufon/canvas"/>      
    </action>
	<action acid="6" stoptype="abort" timeout="30">
      <actionname>wait</actionname> 
      <actionparam paramtype="type" paramvalue="seconds" /> 
      <actionparam paramtype="value" paramvalue="3" /> 
    </action>
    <!--click the free button-->
    <action acid="7" stoptype="abort">
      <actionname>click</actionname>
      <actionparam paramtype="type" paramvalue="link"/>
      <actionparam paramtype="xpath" paramvalue="/html/body/div/div[2]/div[2]/div/div/table/tbody/tr/td[2]/div/ul/li[6]/div/div[2]/span[2]/a"/>      
    </action>
	<action acid="8" stoptype="abort" timeout="30">
      <actionname>wait</actionname> 
      <actionparam paramtype="type" paramvalue="seconds" /> 
      <actionparam paramtype="value" paramvalue="3" /> 
      </action>
	  
	<action acid="3" stoptype="abort" timeout="10">
		<actionname>input</actionname> 
		<actionparam paramtype="type" paramvalue="text field" /> 
		<actionparam paramtype="xpath" paramvalue="//*[@id='kaseyasite']" /> 
		<actionparam paramtype="value" paramvalue="preview.kaseya.net" /> 
	</action>
	<action acid="3" stoptype="abort" timeout="10">
		<actionname>input</actionname> 
		<actionparam paramtype="type" paramvalue="text field" /> 
		<actionparam paramtype="xpath" paramvalue="//*[@id='kaseya_userid']" /> 
		<actionparam paramtype="value" paramvalue="padinh@cisco.com" /> 
	</action>
	<action acid="3" stoptype="abort" timeout="10">
		<actionname>input</actionname> 
		<actionparam paramtype="type" paramvalue="text field" /> 
		<actionparam paramtype="xpath" paramvalue="//*[@id='kaseya_passwd']" /> 
		<actionparam paramtype="value" paramvalue="Test123123" /> 
	</action>
	<action acid="3" stoptype="abort" timeout="10">
		<actionname>input</actionname> 
		<actionparam paramtype="type" paramvalue="select" /> 
		<actionparam paramtype="xpath" paramvalue="//*[@id='kaseya_contactid']" /> 
		<actionparam paramtype="value" paramvalue="ran tao " /> 
	</action>
	<action acid="3" stoptype="abort" timeout="10">
		<actionname>input</actionname> 
		<actionparam paramtype="type" paramvalue="select" /> 
		<actionparam paramtype="xpath" paramvalue="//*[@id='kaseya_contactid']" /> 
		<actionparam paramtype="value" paramvalue="myOrg" /> 
	</action>
    <!--click the add button -->
    <action acid="9" stoptype="abort">
      <actionname>click</actionname>
      <actionparam paramtype="type" paramvalue="button"/>
      <actionparam paramtype="xpath" paramvalue="/html/body/div[2]/div[3]/div/span/button"/>
    </action>
	<action acid="10" stoptype="abort" timeout="30">
      <actionname>wait</actionname> 
      <actionparam paramtype="type" paramvalue="seconds" /> 
      <actionparam paramtype="value" paramvalue="3" /> 
    </action>
    <!--Verify the device has been installed-->
    <action acid="11" stoptype="continue" loop="1" sleep="1" break="y" iterations="10"> 
      <actionname>verify</actionname>
      <actionparam paramtype="type" paramvalue="text"/>
      <actionparam paramtype="xpath" paramvalue="/html/body/div/div[2]/div[2]/div/div/table/tbody/tr/td[2]/div/ul/li[6]/div/div[2]/span"/>
	  <actionparam paramtype="value" paramvalue="Installed"/>
    </action>   
    <action acid="12" stoptype="abort">
      <actionname>submitTCResult</actionname>
      <actionparam paramtype="Boolean" paramvalue="Boolean"/>
    </action>
  </workflow>
</testcase>

